<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.owl.calendar.dao.SmartCalendarDao">
	<insert id="insertCalendar" parameterType="com.owl.calendar.dto.SmartCalendar">
			INSERT INTO SMARTCALENDAR(TYPE, TITLE, CONTENT, STARTDATE, ENDDATE, ALARM, EMAIL, PROJECTIDX) 
			VALUES(#{type}, #{title}, #{content}, #{startDate}, #{endDate}, #{alarm}, #{email},
			<choose>
			    <when test="projectIdx != 0"> #{projectIdx} </when>
			    <otherwise> null </otherwise>
		  </choose>
		  )
	</insert>
	
	<update id="updateCalendar" parameterType="com.owl.calendar.dto.SmartCalendar">
	</update>
	
	<delete id="deleteMyCalendar">
	DELETE FROM SMARTCALENDAR WHERE EMAIL =#{email}
	</delete>
	
	<delete id="deleteProjectCalendar">
	DELETE FROM SMARTCALENDAR WHERE EMAIL =#{email} AND PROJECTIDX =#{projectIdx}
	</delete>
	
<!-- 	<select id="getMemberCalendars" parameterType="String" resultType="com.owl.calendar.dto.SmartCalendar">
		SELECT P.PROJECTIDX, C.CALIDX, C.TITLE, C.CONTENTS, C.STARTDATE, C.ENDDATE, C.ALARM, C.TYPE 
			FROM OWL.SMARTCALENDAR C JOIN OWL.PROJECTLIST P
		ON P.PROJECTIDX = C.PROJECTIDX AND P.EMAIL = #{email}
	</select> -->
	<select id="getMyAllCalendars" resultType="com.owl.calendar.dto.SmartCalendar" parameterType="String" >
	SELECT CALIDX, TYPE, TITLE, CONTENT, STARTDATE, ENDDATE, EMAIL, PROJECTIDX FROM SMARTCALENDAR WHERE EMAIL = #{email}; 
	</select>
	
	<select id="getProjectCalendars" parameterType="Integer">
	</select>
	
</mapper>